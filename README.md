# 凤翔设备平台

**物业部门**：对温泉进行开采。

**客房部门**：面向公众



龙门山，温泉开采难度比较大，水质矿物含量不高。天津甘泉集团。



潜水泵：下到水房





流程：

一、员工模块

上班签到：确定他在公司，弹出页面，选择值班情况，早班 中班 晚班。

查看今日的保养任务：显示领导派发的任务，对任务进行执行确认。

查看个人维修任务：客户部门的维修任务，上传维修任务。

站内信

查看自己的薪资绩效



二、设备模块

设备管理：设备信息的查看，不能删除，不能添加，可以更新。停用。

设备保养手册：上传保养手册（电子手册、纸质手册），提供下载功能   批量上传和批量下载

设备保养任务计划：什么设备  保养名字  多久保养  保养内容

保养任务生成：根据设备的保养计划和当前的时间自动生成的，放在每天的凌晨3点钟进行。

今日的保养任务安排：管理阶层可以对保养信息进行派发，能够看到员工任务的执行情况（二维码是否扫描、水房现场的照片、以及对这个保养任务的数据记录）

设备的保养记录信息：查看设备的所有记录信息







三、维修模块

维修信息添加：谁发现的   为什么坏了 坏的地方。设备停用。

维修进行分析：所有的管理阶级都需要提交维修的分析。

维修安排：记录谁来的 话了多少钱   修了多少时间 最后结果。

预防措施：录入一条信息   总结一下这次问题 开销  未来的预防措施。





四、仓储模块

入库

出库

阈值提示

对相关人员发送采购消息：站内信



五、客房维修任务模块

维修任务上报：干啥了  干了多长时间 用了什么东西，提供小票照片







六、立案采购模块

创建立案：买什么  多少钱 那家公司  为什么要买 谁提出的  设备放哪

立案进行审核：所有公司的领导基层，同意后才可以购买。 

设备调研：针对立案产生调研信息，申请人需要去上传调研的资料（电子文档、信息录入）

采纳调研结果：领导层对于某一个调研结果进行确认，确认后设备进入到采购状态，最终确认添加一条设备信息。





七、系统设置模块

员工管理：

财务

权限

数据容灾

角色









## 项目技术栈

UI：ASP.NET MVC框架

前端框架：LayUI、jQuery   Pear-Admin/H-Plus

SQL:SQL Server 

ORM: EF

技术点：抽象工厂模式、依赖注入Autofac框架、NLog、Log4Net、automapper



要求：

1.后端的静态页、母版页、前端组件框架。

2.仓储层的接口文件和类实现文件创建，并且类中的方法实现。

3.服务层的接口文件和类实现文件创建，并且类中的方法实现。

4.给甲方确定出来一个你们的基本页面（CURD）布局。

5.凤翔设备定时调度Quertz.NET





​	该项目是针对洛阳凤翔温泉度假山庄定制的一款用于管控、调配公司水处理设备设备的OA，主要实现对于整个山庄水设备的日常监控、保养、维护的信息化管理，保障设备的高效运行。

该项目主要包括：设备的**采购、立项、审批、使用、维护、保养任务调度与分发、设备运行监控、人员实施监管、阈值监控预警、系统设置**等模块，将公司设备监管纳入到该信息化平台中。。

 

我负责了：

我负责在该系统中设备维护模块功能开发，主要包括通关算法生成设备的保养任务，利用Quartz.NET调度周期生生成服务任务，对任务进行监管，反馈。

通过硬件设备网络接入接口获取到保养签到信息。

使用eEPLUS/NPOI进行设备运行报表开发，负责实现人员管理绩效模块研发，主要包括对员工绩效以及相关数据进行可视化呈现。

负责实现整个项目中的二级权限开发，包括人员权限分配，系统权限拦截验证。

使用redis进行热点数据的缓存处理，使用mongdo实现业务人员小型CRM系统，包括了对意向用户的信息收集，通过算法对意向客户进行分析，协助业务人员进行业务的开发。

负责小型的仓储WMS系统开发，包括备件采购、备件入库、通过websocket实现备件的事实监控，备件的采购批次，备件调拨，库存盘点等功能的研发。



## **技术问题**

layui分页

条件过滤

图片上传

实体可空字段

autocomplate

layui富文本使用

form表单赋不上值(坑):

添加点了一下数据库加了两条(坑):

VO对象:服务层向UI传递的实体对象

DTO:服务和仓储之间传递的实体对象

layui行中按钮显隐性控制

layui日历范围检索

项目二级权限的实现

1）动态渲染菜单

2）拦截器拦截  filiter

3）允许用户添加能看到页面

EF添加数据后获取新数据主键

路由传值和QueryString问题：?key=value&key2=value2

在强类型页面使用ViewBag传值的问题,js中硬编码

```
let number =@ViewBag.id;
let name = '@ViewBag.name';
//集合情况不要使用
```

JS父子页面赋值获取值问题

前端传递复杂类型数据，后端接值问题
